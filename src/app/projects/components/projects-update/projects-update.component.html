<div class="projects-header">
  <div class="icon">
    <span class="material-symbols-outlined emphasis"> code </span>
  </div>
  <div class="text">
    <h1>{{ "PROJECTS.UPDATE.T" | translate }}</h1>
    <p>{{ "PROJECTS.UPDATE.MESSAGE" | translate }}</p>
  </div>
</div>
<div mat-dialog-content>
  <ng-scrollbar class="form-scroll">
    <form [formGroup]="projectForm">
      <div class="grid-section">
        <mat-form-field appearance="outline">
          <mat-label>{{ "FORMS.TYPE" | translate }}</mat-label>
          <mat-select
            #type
            formControlName="type"
            [placeholder]="'FORMS.PLACEHOLDER.TYPE' | translate"
            cdkFocusInitial
          >
            <mat-option value="personal">
              <img
                src="/assets/images/icons/personal.png"
                class="app-education-type-icon"
              />
              {{ "PROJECTS.TYPES.PERSONAL" | translate }}
            </mat-option>
            <mat-option value="educational">
              <img
                src="/assets/images/icons/educational.png"
                class="app-education-type-icon"
              />
              {{ "PROJECTS.TYPES.EDUCATIONAL" | translate }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="projectForm.controls.type.invalid">{{
            "FORMS.REQUIRED.TYPE" | translate
          }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{ "FORMS.TITLE" | translate }}</mat-label>
          <input #title matInput formControlName="title" />
          <mat-error *ngIf="projectForm.controls.title?.hasError('required')">{{
            "FORMS.REQUIRED.TITLE" | translate
          }}</mat-error>
          <mat-error
            *ngIf="
              !projectForm.controls.title?.hasError('required') &&
              projectForm.controls.title?.hasError('minlength')
            "
            >{{ "FORMS.ERROR.TITLE_INVALID" | translate }}</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{ "FORMS.TAG_LINE" | translate }}</mat-label>
          <input matInput formControlName="tagLine" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{ "FORMS.GITHUB_LINK" | translate }}</mat-label>
          <input matInput formControlName="github" />
          <mat-error *ngIf="projectForm.controls.github.hasError('pattern')">
            {{ "FORMS.ERROR.LINK_INVALID" | translate }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{ "FORMS.PROJECT_LINK" | translate }}</mat-label>
          <input matInput formControlName="link" />
          <mat-error *ngIf="projectForm.controls.link.hasError('pattern')">
            {{ "FORMS.ERROR.LINK_INVALID" | translate }}
          </mat-error>
        </mat-form-field>
      </div>
      <div class="grid-section">
        <div class="sub-grid">
          <mat-form-field appearance="outline">
            <mat-label>{{ "FORMS.DATES.START" | translate }}</mat-label>
            <input
              matInput
              [matDatepicker]="startDate"
              formControlName="startDate"
            />
            <mat-hint>{{ "FORMS.DATES.HINT" | translate }}</mat-hint>
            <mat-datepicker-toggle
              matSuffix
              [for]="startDate"
            ></mat-datepicker-toggle>
            <mat-datepicker #startDate></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>{{ "FORMS.DATES.END" | translate }}</mat-label>
            <input
              matInput
              [matDatepicker]="endDate"
              formControlName="endDate"
            />
            <mat-hint>{{ "FORMS.DATES.HINT" | translate }}</mat-hint>
            <mat-datepicker-toggle
              matSuffix
              [for]="endDate"
            ></mat-datepicker-toggle>
            <mat-datepicker #endDate></mat-datepicker>
          </mat-form-field>
        </div>

        <app-stack-selector
          #stack
          [data]="data && data.stack"
          [type]="projectForm.value.type"
        >
        </app-stack-selector>

        <mat-form-field appearance="outline">
          <mat-label>{{ "FORMS.DESCRIPTION" | translate }}</mat-label>
          <textarea matInput formControlName="description" rows="5"></textarea>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{ "FORMS.NOTES" | translate }}</mat-label>
          <textarea matInput formControlName="notes"></textarea>
        </mat-form-field>
      </div>
    </form>
  </ng-scrollbar>
</div>
<div mat-dialog-actions class="actions">
  <button mat-raised-button (click)="onNoClick()">{{
    "ACTIONS.CANCEL" | translate
  }}</button>
  <button
    mat-raised-button
    [disabled]="!projectForm.valid || !stack.isStackValid()"
    color="primary"
    (click)="onSaveClick()"
    cdkFocusInitial
    >{{
      isUpdating
        ? ("ACTIONS.UPDATE_TYPE"
          | translate : { type: ("PROJECTS.T_SINGLE" | translate) })
        : ("ACTIONS.SAVE_TYPE"
          | translate : { type: ("PROJECTS.T_SINGLE" | translate) })
    }}</button
  >
</div>
